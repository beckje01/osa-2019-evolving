<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="395px" preserveAspectRatio="none" style="width:735px;height:395px;" version="1.1" viewBox="0 0 735 395" width="735px" zoomAndPan="magnify"><defs><filter height="300%" id="f19ezx6go2lowb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="304" x="223" y="16.708">SmartThings Device Control Plane</text><!--cluster Global--><rect fill="#FFFFFF" filter="url(#f19ezx6go2lowb)" height="246" style="stroke: #000000; stroke-width: 1.5;" width="130" x="28" y="36.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="68.5" y="51.9482">Global</text><!--cluster Regional--><rect fill="#FFFFFF" filter="url(#f19ezx6go2lowb)" height="71" style="stroke: #000000; stroke-width: 1.5;" width="277" x="14" y="313.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="119" y="328.9482">Regional</text><!--cluster Shard--><rect fill="#FFFFFF" filter="url(#f19ezx6go2lowb)" height="71" style="stroke: #000000; stroke-width: 1.5;" width="414" x="310" y="313.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="494" y="328.9482">Shard</text><!--entity Conductor--><rect fill="#FEFECE" filter="url(#f19ezx6go2lowb)" height="36.2969" style="stroke: #000000; stroke-width: 1.5;" width="93" x="57.5" y="63.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="67.5" y="86.9482">Conductor</text><!--entity emissary--><rect fill="#FEFECE" filter="url(#f19ezx6go2lowb)" height="36.2969" style="stroke: #000000; stroke-width: 1.5;" width="114" x="36" y="238.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="46" y="261.9482">OCF Backend</text><!--entity ApiGateway--><rect fill="#FEFECE" filter="url(#f19ezx6go2lowb)" height="36.2969" style="stroke: #000000; stroke-width: 1.5;" width="100" x="22" y="340.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="32" y="363.9482">ApiGateway</text><!--entity mqtt--><rect fill="#FEFECE" filter="url(#f19ezx6go2lowb)" height="36.2969" style="stroke: #000000; stroke-width: 1.5;" width="126" x="157" y="340.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="167" y="363.9482">MQTT Backend</text><!--entity viper--><rect fill="#FEFECE" filter="url(#f19ezx6go2lowb)" height="36.2969" style="stroke: #000000; stroke-width: 1.5;" width="81" x="318.5" y="340.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="328.5" y="363.9482">Backend</text><!--entity widget--><rect fill="#FEFECE" filter="url(#f19ezx6go2lowb)" height="36.2969" style="stroke: #000000; stroke-width: 1.5;" width="113" x="434.5" y="340.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="444.5" y="363.9482">Hub Backend</text><!--entity dth--><rect fill="#FEFECE" filter="url(#f19ezx6go2lowb)" height="36.2969" style="stroke: #000000; stroke-width: 1.5;" width="133" x="582.5" y="340.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="592.5" y="363.9482">Legacy Backend</text><!--link ApiGateway to Conductor--><path d="M99.9288,340.6796 C125.2785,323.4173 159.7718,297.9922 167,282.9531 C196.6083,221.3492 149.4026,142.5593 121.7627,104.5144 " fill="none" id="ApiGateway-Conductor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="118.4954,100.0807,120.6142,109.699,121.4615,104.1059,127.0545,104.9532,118.4954,100.0807" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="174" y="205.02">api requests</text><!--link Conductor to mqtt--><path d="M150.5196,99.883 C188.199,117.1855 238.7128,147.3655 262,191.9531 C288.1578,242.037 252.7995,309.1938 232.4999,340.9156 " fill="none" id="Conductor-mqtt" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="262" cy="191.9531" fill="#FFFFFF" rx="10" ry="10" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M259.0058,201.4943 A10,10 0 0 0 271.5412 194.9473" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M264.9942,182.4119 A10,10 0 0 0 252.4588 188.9589" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="262" cy="191.9531" fill="#FFFFFF" rx="6" ry="6" style="stroke: #A80036; stroke-width: 1.5;"/><!--link Conductor to emissary--><path d="M102.8642,100.022 C100.7564,133.5562 96.2617,205.0628 94.1461,238.7203 " fill="none" id="Conductor-emissary" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="98.5081" cy="169.3249" fill="#FFFFFF" rx="10" ry="10" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M91.0073,175.9385 A10,10 0 0 0 105.1216 176.8257" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M106.0088,162.7114 A10,10 0 0 0 91.8945 161.8242" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="98.5081" cy="169.3249" fill="#FFFFFF" rx="6" ry="6" style="stroke: #A80036; stroke-width: 1.5;"/><!--link Conductor to viper--><path d="M150.662,95.423 C175.2134,103.5564 205.2667,115.213 230,129.9531 C248.1379,140.7626 251.3124,145.784 266,160.9531 C318.0435,214.7025 345.0614,302.9795 354.7506,340.8148 " fill="none" id="Conductor-viper" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="266" cy="160.9531" fill="#FFFFFF" rx="10" ry="10" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M265.8388,170.9518 A10,10 0 0 0 275.9987 161.1144" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M266.1612,150.9544 A10,10 0 0 0 256.0013 160.7919" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="266" cy="160.9531" fill="#FFFFFF" rx="6" ry="6" style="stroke: #A80036; stroke-width: 1.5;"/><!--link Conductor to dth--><path d="M150.6187,90.5917 C187.2844,98.3101 239.155,111.2992 282,129.9531 C421.0939,190.512 569.1816,298.0813 625.4672,340.7675 " fill="none" id="Conductor-dth" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="484.7867" cy="242.0626" fill="#FFFFFF" rx="10" ry="10" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M486.8775,251.8416 A10,10 0 0 0 494.5657 239.9718" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M482.6959,232.2836 A10,10 0 0 0 475.0077 244.1534" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="484.7867" cy="242.0626" fill="#FFFFFF" rx="6" ry="6" style="stroke: #A80036; stroke-width: 1.5;"/><!--link Conductor to widget--><path d="M150.5294,91.4628 C181.6793,99.049 222.8823,111.4982 256,129.9531 C357.0158,186.2444 445.5947,297.2563 477.9422,340.8094 " fill="none" id="Conductor-widget" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="392.7217" cy="240.1581" fill="#FFFFFF" rx="10" ry="10" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M392.5423,250.1565 A10,10 0 0 0 402.7201 240.3375" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M392.9011,230.1597 A10,10 0 0 0 382.7233 239.9787" fill="#FFFFFF" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="392.7217" cy="240.1581" fill="#FFFFFF" rx="6" ry="6" style="stroke: #A80036; stroke-width: 1.5;"/><!--
@startuml
title SmartThings Device Control Plane
rectangle Global {
    rectangle Conductor as "Conductor"
    rectangle emissary as "OCF Backend"
}

rectangle Regional {
    rectangle ApiGateway
    rectangle mqtt as "MQTT Backend"
}

rectangle Shard {
    rectangle viper as "Backend"
    rectangle widget as "Hub Backend"
    rectangle dth as "Legacy Backend"
}



ApiGateway -> Conductor : api requests

Conductor - -(0)- - mqtt
Conductor -(0)- emissary
Conductor - -(0)- - viper
Conductor - -(0)- - dth
Conductor - -(0)- - widget
@enduml

PlantUML version 1.2018.13(Mon Nov 26 11:11:51 CST 2018)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_202-b05
Operating System: Linux
OS Version: 5.1.1-2-MANJARO
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>